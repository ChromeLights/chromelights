{"version":3,"sources":["webpack:///./chrome/src/components/CreateHighlights.jsx"],"names":["Annotations","firestore","collection","UrlPages","Entries","CreateHighlights","props","state","message","highlightText","highlightObj","markInstance","setState","event","preventDefault","target","name","value","setView","newString","domPath","url","submitUrl","urlEncode","messageSubmit","newFireHL","console","log","doc","add","then","highlight","id","isQuestion","upVote","downVote","content","highlightID","comments","user","date","Date","title","catch","error","onSubmit","handleChange","MapState","MapDispatch","connect"],"mappings":"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","file":"0.54be6e5b62ae17fe4c6a.hot-update.js","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport ReactDOM from \"react-dom\";\nimport { firestore } from \"~/fire\";\nimport Mark from \"mark.js\";\nimport { createHighlightedObj, urlEncode } from \"../highlighting\";\n\n//Firestore\nconst Annotations = firestore.collection(\"Annotations\");\nconst UrlPages = firestore.collection(\"UrlPages\");\nconst Entries = firestore.collection(\"Entries\");\n\nexport class CreateHighlights extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: \"\",\n      highlightText: \"highlight text to create a comment!\",\n      highlightObj: {},\n      markInstance: \"\"\n    };\n  }\n\n  componentWillUnmount(){\n    this.setState({\n      message: \"\",\n      highlightText: \"highlight text to create a comment!\",\n      highlightObj: {},\n      markInstance: \"\"\n    })\n  }\n\n  handleChange = event => {\n    event.preventDefault();\n    let { name, value } = event.target;\n    this.setState({\n      [name]: value\n    });\n  };\n\n\n  // PLEASE DO NOT ERASE THIS - Thanks (Fran)\n  // async onHighlightClick(event) {\n  //   try {\n  //     event.preventDefault();\n  //     const highlightObj = createHighlightedObj();\n  //     if (this.state.markInstance) this.state.markInstance.unmark();\n  //     const markInstance = await new Mark(highlightObj.domPath);\n  //     this.setState(\n  //       {\n  //         highlightObj,\n  //         markInstance,\n  //         highlightText: highlightObj.newString\n  //       },\n  //       () => {\n  //         markInstance.mark(this.state.highlightObj.newString, {\n  //           acrossElements: true,\n  //           separateWordSearch: false,\n  //           className: \"chromelights-highlights\"\n  //         });\n  //       }\n  //     );\n  //   } catch (err) {\n  //     console.error(err);\n  //   }\n  // }\n\n  onSubmit = event => {\n    event.preventDefault();\n    const { setView } = this.props;\n    const { newString, domPath, url } = this.props.highlightObj;\n    const submitUrl = urlEncode(url);\n    const messageSubmit = this.state.message;\n    const newFireHL = {\n      newString,\n      domPath,\n      submitUrl,\n    };\n    console.log(\"newFireHL\", newFireHL);\n\n    UrlPages.doc(submitUrl)\n      .collection(\"highlights\")\n      .add(newFireHL)\n      .then(highlight => {\n        UrlPages.doc(submitUrl)\n          .collection(\"highlights\")\n          .doc(highlight.id)\n          .collection(\"entries\")\n          .add({\n            isQuestion: this.props.isQuestion,\n            upVote: 0,\n            downVote: 0,\n            content: messageSubmit,\n            highlightID: highlight.id,\n            comments: [],\n            user: \"Tom\",\n            date: new Date(),\n            title: \"TBD\",\n          });\n      })\n      .then(() => {\n       setView(\"\")\n      })\n      .catch(error => console.log(\"error: \", error));\n    this.state;\n  };\n\n  render() {\n    return (\n      <div>\n        <h3 className=\"highlight-title\" >\n          Highlighted text:\n          {this.props.highlightText}\n        </h3>\n        <h5>User name, data </h5>\n        <div id=\"message-form\">\n          <form onSubmit={this.onSubmit}>\n            <input\n              type=\"text\"\n              name=\"message\"\n              className=\"message-field-wide\"\n              onChange={this.handleChange}\n              value={this.state.message}\n            />\n            <input type=\"submit\" value=\"Submit\" />\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst MapState = ({ highlight }) => {\n  const highlightObj = highlight.highlightObj;\n  const highlightText = highlight.highlightText;\n  return { highlightObj, highlightText }\n};\n\nconst MapDispatch = null;\n\nexport default connect(MapState, MapDispatch)(CreateHighlights);\n\n\n\n// WEBPACK FOOTER //\n// ./chrome/src/components/CreateHighlights.jsx"],"sourceRoot":""}